<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
<title th:text="#{title}">On-line Restaurant</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
    integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
    crossorigin="anonymous">
</head>
<body>
    <div class="container">
        <div th:replace="fragments/header :: header"></div>
        <div class="panel-body">
            <div>
                <h1 th:text="#{orderViewFor(${orderInfo.getName()})}">Order View</h1>
                <h3 th:text="${#temporals.format(orderInfo.getDate(), 'dd-MM-yyyy HH:mm')}"
                    class="pull-right"></h3>
            </div>
        </div>
        <form method="post" th:object="${orderInfo}">
            <table class="table table-striped table-hover form-narrow">
                <thead>
                    <tr>
                        <th th:text="#{choose}">Choose</th>
                        <th th:text="#{amount}">Amount</th>
                        <th th:text="#{price}">Price</th>
                    </tr>
                </thead>
                <thead>
                    <tr th:if="${not #lists.isEmpty(orderInfo.getPizzas())}">
                        <th th:text="#{pizza}">Pizza</th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody th:each="pizza, itemStat : ${orderInfo.getPizzas()}">
                    <tr>
                        <td>
                            <input type="hidden" th:name="*{pizzas[__${itemStat.index}__].name}"
                                th:text="${pizza.getName()}"
                                th:field="*{pizzas[__${itemStat.index}__].name}"
                                th:value="${pizza.getName()}" />
                        </td>
                        <td>
                            <input type="hidden" th:name="*{pizzas[__${itemStat.index}__].amount}"
                                th:text="${pizza.getAmount()}"
                                th:field="*{pizzas[__${itemStat.index}__].amount}"
                                th:value="${pizza.getAmount()}" />
                        </td>
                        <td>
                            <input id="price" type="hidden"
                                th:name="*{pizzas[__${itemStat.index}__].price}"
                                th:text="${pizza.getPrice()}"
                                th:field="*{pizzas[__${itemStat.index}__].price}"
                                th:value="${pizza.getPrice()}" />
                        </td>
                    </tr>
                </tbody>

                <thead>
                    <tr th:if="${not #lists.isEmpty(orderInfo.getPizzaAdds())}">
                        <th th:text="#{pizzaAdds}">Pizza adds</th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody th:each="pizzaAdd, itemStat : ${orderInfo.getPizzaAdds()}">
                    <tr>
                        <td>
                            <input type="hidden" th:name="*{pizzaAdds[__${itemStat.index}__].name}"
                                th:text="${pizzaAdd.getName()}"
                                th:field="*{pizzaAdds[__${itemStat.index}__].name}"
                                th:value="${pizzaAdd.getName()}" />
                        </td>
                        <td>
                            <input type="hidden"
                                th:name="*{pizzaAdds[__${itemStat.index}__].amount}"
                                th:text="${pizzaAdd.getAmount()}"
                                th:field="*{pizzaAdds[__${itemStat.index}__].amount}"
                                th:value="${pizzaAdd.getAmount()}" />
                        </td>
                        <td>
                            <input id="price" type="hidden"
                                th:name="*{pizzaAdds[__${itemStat.index}__].price}"
                                th:text="${pizzaAdd.getPrice()}"
                                th:field="*{pizzaAdds[__${itemStat.index}__].price}"
                                th:value="${pizzaAdd.getPrice()}" />
                        </td>
                    </tr>
                </tbody>

                <thead>
                    <tr th:if="${not #lists.isEmpty(orderInfo.getMainCourses())}">
                        <th th:text="#{mainCourses}">Main courses</th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody th:each="mainCourse, itemStat : ${orderInfo.getMainCourses()}">
                    <tr>
                        <td>
                            <input type="hidden"
                                th:name="*{mainCourses[__${itemStat.index}__].name}"
                                th:text="${mainCourse.getName()}"
                                th:field="*{mainCourses[__${itemStat.index}__].name}"
                                th:value="${mainCourse.getName()}" />
                        </td>
                        <td>
                            <input type="hidden"
                                th:name="*{mainCourses[__${itemStat.index}__].amount}"
                                th:text="${mainCourse.getAmount()}"
                                th:field="*{mainCourses[__${itemStat.index}__].amount}"
                                th:value="${mainCourse.getAmount()}" />
                        </td>
                        <td>
                            <input id="price" type="hidden"
                                th:name="*{mainCourses[__${itemStat.index}__].price}"
                                th:text="${mainCourse.getPrice()}"
                                th:field="*{mainCourses[__${itemStat.index}__].price}"
                                th:value="${mainCourse.getPrice()}" />
                        </td>
                    </tr>
                </tbody>

                <thead>
                    <tr th:if="${not #lists.isEmpty(orderInfo.getMainCourseAdds())}">
                        <th th:text="#{mainCourseAdds}">Main course adds</th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody th:each="mainCourseAdd, itemStat : ${orderInfo.getMainCourseAdds()}">
                    <tr>
                        <td>
                            <input type="hidden"
                                th:name="*{mainCourseAdds[__${itemStat.index}__].name}"
                                th:text="${mainCourseAdd.getName()}"
                                th:field="*{mainCourseAdds[__${itemStat.index}__].name}"
                                th:value="${mainCourseAdd.getName()}" />
                        </td>
                        <td>
                            <input type="hidden"
                                th:name="*{mainCourseAdds[__${itemStat.index}__].amount}"
                                th:text="${mainCourseAdd.getAmount()}"
                                th:field="*{mainCourseAdds[__${itemStat.index}__].amount}"
                                th:value="${mainCourseAdd.getAmount()}" />
                        </td>
                        <td>
                            <input id="price" type="hidden"
                                th:name="*{mainCourseAdds[__${itemStat.index}__].price}"
                                th:text="${mainCourseAdd.getPrice()}"
                                th:field="*{mainCourseAdds[__${itemStat.index}__].price}"
                                th:value="${mainCourseAdd.getPrice()}" />
                        </td>
                    </tr>
                </tbody>

                <thead>
                    <tr th:if="${not #lists.isEmpty(orderInfo.getSoups())}">
                        <th th:text="#{soups}">Soups</th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody th:each="soup, itemStat : ${orderInfo.getSoups()}">
                    <tr>
                        <td>
                            <input type="hidden" th:name="*{soups[__${itemStat.index}__].name}"
                                th:text="${soup.getName()}"
                                th:field="*{soups[__${itemStat.index}__].name}"
                                th:value="${soup.getName()}" />
                        </td>
                        <td>
                            <input type="hidden" th:name="*{soups[__${itemStat.index}__].amount}"
                                th:text="${soup.getAmount()}"
                                th:field="*{soups[__${itemStat.index}__].amount}"
                                th:value="${soup.getAmount()}" />
                        </td>
                        <td>
                            <input id="price" type="hidden"
                                th:name="*{soups[__${itemStat.index}__].price}"
                                th:text="${soup.getPrice()}"
                                th:field="*{soups[__${itemStat.index}__].price}"
                                th:value="${soup.getPrice()}" />
                        </td>
                    </tr>
                </tbody>

                <thead>
                    <tr th:if="${not #lists.isEmpty(orderInfo.getDrinks())}">
                        <th th:text="#{drinks}">Drinks</th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody th:each="drink, itemStat : ${orderInfo.getDrinks()}">
                    <tr>
                        <td>
                            <input type="hidden" th:name="*{drinks[__${itemStat.index}__].name}"
                                th:text="${drink.getName()}"
                                th:field="*{drinks[__${itemStat.index}__].name}"
                                th:value="${drink.getName()}" />
                        </td>
                        <td>
                            <input type="hidden" th:name="*{drinks[__${itemStat.index}__].amount}"
                                th:text="${drink.getAmount()}"
                                th:field="*{drinks[__${itemStat.index}__].amount}"
                                th:value="${drink.getAmount()}" />
                        </td>
                        <td>
                            <input id="price" type="hidden"
                                th:name="*{drinks[__${itemStat.index}__].price}"
                                th:text="${drink.getPrice()}"
                                th:field="*{drinks[__${itemStat.index}__].price}"
                                th:value="${drink.getPrice()}" />
                        </td>
                    </tr>
                </tbody>
                <tfoot>
                    <tr>
                        <td></td>
                        <td>
                            <strong><span th:text="#{toPay}">To pay </span></strong>
                        </td>
                        <td>
                            <strong><span th:type=text id="totalPrice"
                                th:name="*{completePrice}" th:text="${orderInfo.getCompletePrice()}"
                                th:field="*{completePrice}">0</span></strong>
                            <input type="hidden" th:field="*{completePrice}"
                                th:value="${orderInfo.getCompletePrice()}" />
                        </td>
                    </tr>
            </tfoot>
        </table> <br /> <br />
            <div class="panel-body">
                <div>
                    <input type="submit" th:name="submit" th:value="#{back}"
                        th:formaction="@{/orders}" class="btn btn-large btn-success pull-right" />
                </div>
            </div>
        </form>
        <div th:replace="fragments/footer :: footer"></div>
    </div>
</body>
</html>
